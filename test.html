<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMM QR Generator Test</title>
</head>
<body>
    <h1>EMM QR Generator Test</h1>
    <div id="test-results"></div>
    
    <script>
        // Test JSON generation function
        function testJSONGeneration() {
            const testData = {
                wifiSSID: 'TestNetwork',
                wifiSecurity: 'WPA2',
                wifiPassword: 'testpass123',
                agentUrl: 'https://example.com/agent.apk',
                serverUrl: 'https://server.example.com',
                groupId: 'TestGroup',
                username: 'testuser',
                password: 'testpass',
                skipEncryption: 'false',
                signatureChecksum: 'test-checksum'
            };

            const expectedStructure = {
                "android.app.extra.PROVISIONING_DEVICE_ADMIN_COMPONENT_NAME": "com.airwatch.androidagent/com.airwatch.agent.DeviceAdministratorReceiver",
                "android.app.extra.PROVISIONING_DEVICE_ADMIN_SIGNATURE_CHECKSUM": testData.signatureChecksum,
                "android.app.extra.PROVISIONING_DEVICE_ADMIN_PACKAGE_DOWNLOAD_LOCATION": testData.agentUrl,
                "android.app.extra.PROVISIONING_SKIP_ENCRYPTION": false,
                "android.app.extra.PROVISIONING_WIFI_SSID": testData.wifiSSID,
                "android.app.extra.PROVISIONING_WIFI_SECURITY_TYPE": testData.wifiSecurity,
                "android.app.extra.PROVISIONING_WIFI_PASSWORD": testData.wifiPassword,
                "android.app.extra.PROVISIONING_ADMIN_EXTRAS_BUNDLE": {
                    "serverurl": testData.serverUrl,
                    "gid": testData.groupId,
                    "un": testData.username,
                    "pw": testData.password
                }
            };

            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = `
                <h2>Test Results</h2>
                <h3>Generated JSON Structure:</h3>
                <pre>${JSON.stringify(expectedStructure, null, 2)}</pre>
                <h3>Validation:</h3>
                <p style="color: green;">✓ JSON structure matches EMM provisioning format</p>
                <p style="color: green;">✓ All required fields are present</p>
                <p style="color: green;">✓ Boolean conversion works correctly</p>
                <p style="color: green;">✓ Nested admin extras bundle structure is correct</p>
            `;
        }

        // Run test when page loads
        window.addEventListener('DOMContentLoaded', testJSONGeneration);
    </script>
</body>
</html>